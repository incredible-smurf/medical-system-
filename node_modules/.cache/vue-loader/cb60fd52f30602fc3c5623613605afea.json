{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\vue try\\system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\vue try\\system\\src\\page\\dati\\create.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\vue try\\system\\src\\page\\dati\\create.vue","mtime":1605601934985},{"path":"C:\\Users\\Administrator\\Desktop\\vue try\\system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vue try\\system\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vue try\\system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vue try\\system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgcXMgZnJvbSAicXMiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBiZWZvcmVDcmVhdGUoKSB7DQogICAgdGhpcy4kYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5BdXRob3JpemF0aW9uID0NCiAgICAgICJUb2tlbiAiICsgdGhpcy4kc3RvcmUuc3RhdGUuQXV0aG9yaXphdGlvbjsNCiAgICB0aGlzLiRheGlvcw0KICAgICAgLmdldCgiL2dyb3NzRGlhZ25vc2lzTW9kZWxMaXN0LyIsIHsNCiAgICAgICAgY2F0ZWdvcnk6ICJHcm9zcyIsDQogICAgICAgIHNlYXJjaDogdGhpcy4kc3RvcmUuc3RhdGUudXNlcnByb2ZpbGUubmFtZSwNCiAgICAgIH0pDQogICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgIGZvciAobGV0IGkgaW4gcmVzLmRhdGEucmVzdWx0cykgew0KICAgICAgICAgIGxldCB0bXAgPSB7fTsNCiAgICAgICAgICB0bXAudmFsdWUgPSByZXMuZGF0YS5yZXN1bHRzW2ldLmlkOw0KICAgICAgICAgIHRtcC5sYWJlbCA9IHJlcy5kYXRhLnJlc3VsdHNbaV0ubmFtZTsNCiAgICAgICAgICB0aGlzLnRlbXBsYXRlbGlzdC5wdXNoKHRtcCk7DQogICAgICAgIH0NCiAgICAgIH0pDQogICAgICAuY2F0Y2goKGVycikgPT4gew0KICAgICAgICBhbGVydChlcnIpOw0KICAgICAgfSk7DQogIH0sDQogIGRhdGEoKSB7DQogICAgbGV0IGlkaXNvayA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsNCiAgICAgIGlmICh2YWx1ZSA9PSAiIikgY2FsbGJhY2sobmV3IEVycm9yKCLor7fovpPlhaXnl4XnkIbmoaPmoYhJRCIpKTsNCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgaWYgKHZhbHVlW2ldIDwgIjAiIHx8IHZhbHVlW2ldID4gIjkiKQ0KICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi55eF55CG5qGj5qGISUTlj6rog73mmK/mlbDlrZciKSk7DQogICAgICB9DQogICAgICBjYWxsYmFjaygpOw0KICAgIH07DQogICAgcmV0dXJuIHsNCiAgICAgIGxhYmVsUG9zaXRpb246ICJsZWZ0IiwNCiAgICAgIGZvcm06IHsNCiAgICAgICAgZGV0YWlsOiB7fSwNCiAgICAgICAgbWVkaWNhbEZpbGU6ICIiLA0KICAgICAgICB0ZW1wbGF0ZTogIiIsDQogICAgICB9LA0KICAgICAgcnVsZXM6IHsNCiAgICAgICAgbWVkaWNhbEZpbGU6IFt7IHJlcXVpcmVkOiB0cnVlLCB2YWxpZGF0b3I6IGlkaXNvaywgdHJpZ2dlcjogImJsdXIiIH1dLA0KICAgICAgICB0ZW1wbGF0ZTogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fpgInmi6nkuIDkuKrmqKHmnb8iLCB0cmlnZ2VyOiAiY2hhbmdlIiB9LA0KICAgICAgICBdLA0KICAgICAgfSwNCg0KICAgICAgdGVtcGxhdGVsaXN0OiBbXSwNCg0KICAgICAgZm9ybXJ1bGU6IFtdLA0KICAgICAgZm9ybUNvbnRlbnQ6IHt9LA0KICAgICAgcGFnZWluZGV4OiAwLA0KICAgICAgb3B0aW9uOiB7DQogICAgICAgIHN1Ym1pdEJ0bjogew0KICAgICAgICAgIHNob3c6IGZhbHNlLA0KICAgICAgICB9LA0KICAgICAgfSwNCiAgICB9Ow0KICB9LA0KICBtZXRob2RzOiB7DQogICAgZGF0aWNyZWF0ZSh0YWJsZSkgew0KICAgICAgbGV0IF90aGlzID0gdGhpczsNCiAgICAgIGxldCB0bXAgPSB7fTsNCiAgICAgIHRtcC5tZWRpY2FsRmlsZSA9IHRoaXMuZm9ybS5tZWRpY2FsRmlsZTsNCiAgICAgIHRoaXMuJHJlZnNbdGFibGVdLnZhbGlkYXRlKCh2YWxpZCkgPT4gew0KICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICB0bXAuZGV0YWlsID0gSlNPTi5zdHJpbmdpZnkodGhpcy5mb3JtcnVsZSk7DQogICAgICAgICAgdGhpcy4kYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5BdXRob3JpemF0aW9uID0NCiAgICAgICAgICAgICJUb2tlbiAiICsgdGhpcy4kc3RvcmUuc3RhdGUuQXV0aG9yaXphdGlvbjsNCiAgICAgICAgICB0aGlzLiRheGlvcw0KICAgICAgICAgICAgLnBvc3QoIi9ncm9zc1JlcG9ydExDLyIsIHRtcCkNCiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAgICAgYWxlcnQoIuWIm+W7uuaIkOWKnyIpOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7DQogICAgICAgICAgICAgIGFsZXJ0KGVycik7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICBoYW5kbGVDaGFuZ2UodmFsdWUpIHsNCiAgICAgIHRoaXMuJGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9DQogICAgICAgICJUb2tlbiAiICsgdGhpcy4kc3RvcmUuc3RhdGUuQXV0aG9yaXphdGlvbjsNCiAgICAgIHRoaXMucGFnZWluZGV4ID0gMTsNCiAgICAgIHRoaXMuJGF4aW9zDQogICAgICAgIC5nZXQoIi9ncm9zc0RpYWdub3Npc01vZGVsUlUvIiArIHZhbHVlICsgIi8iKQ0KICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgdGhpcy5mb3JtcnVsZSA9IHJlcy5kYXRhLmRldGFpbC50ZW1wbGF0ZTsNCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKChlcnIpID0+IHsNCiAgICAgICAgICBhbGVydChlcnIpOw0KICAgICAgICB9KTsNCiAgICB9LA0KICB9LA0KICB3YXRjaDoge30sDQp9Ow0K"},{"version":3,"sources":["create.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"create.vue","sourceRoot":"src/page/dati","sourcesContent":["<template>\r\n  <el-main>\r\n    <el-form\r\n      ref=\"daticreate\"\r\n      :model=\"form\"\r\n      label-width=\"80px\"\r\n      :label-position=\"labelPosition\"\r\n      :rules=\"rules\"\r\n    >\r\n      <el-row :gutter=\"20\">\r\n        <el-col :span=\"10\">\r\n          <el-form-item prop=\"medicalFile\" label=\"病理档案ID\">\r\n            <el-input\r\n              placeholder=\"请输入病理档案ID\"\r\n              v-model=\"form.medicalFile\"\r\n            ></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"10\">\r\n          <el-form-item label=\"请选择大体模板\" prop=\"template\">\r\n            <el-cascader\r\n              v-model=\"form.template\"\r\n              :options=\"templatelist\"\r\n              @change=\"handleChange\"\r\n            ></el-cascader>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <form-create\r\n        v-if=\"pageindex == 1\"\r\n        v-model=\"formContent\"\r\n        :rule=\"formrule\"\r\n        :option=\"option\"\r\n        style=\"width: 80%; margin-top: 20px\"\r\n      ></form-create>\r\n      <el-row\r\n        type=\"flex\"\r\n        class=\"buttonquery\"\r\n        justify=\"center\"\r\n        :gutter=\"10\"\r\n        v-if=\"pageindex == 1\"\r\n      >\r\n        <el-col :span=\"6\">\r\n          <el-button @click=\"daticreate('daticreate')\">新建大体报告</el-button>\r\n        </el-col>\r\n      </el-row>\r\n    </el-form>\r\n  </el-main>\r\n</template>\r\n\r\n<script>\r\nimport qs from \"qs\";\r\nexport default {\r\n  beforeCreate() {\r\n    this.$axios.defaults.headers.Authorization =\r\n      \"Token \" + this.$store.state.Authorization;\r\n    this.$axios\r\n      .get(\"/grossDiagnosisModelList/\", {\r\n        category: \"Gross\",\r\n        search: this.$store.state.userprofile.name,\r\n      })\r\n      .then((res) => {\r\n        for (let i in res.data.results) {\r\n          let tmp = {};\r\n          tmp.value = res.data.results[i].id;\r\n          tmp.label = res.data.results[i].name;\r\n          this.templatelist.push(tmp);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        alert(err);\r\n      });\r\n  },\r\n  data() {\r\n    let idisok = (rule, value, callback) => {\r\n      if (value == \"\") callback(new Error(\"请输入病理档案ID\"));\r\n      for (let i = 0; i < value.length; i++) {\r\n        if (value[i] < \"0\" || value[i] > \"9\")\r\n          callback(new Error(\"病理档案ID只能是数字\"));\r\n      }\r\n      callback();\r\n    };\r\n    return {\r\n      labelPosition: \"left\",\r\n      form: {\r\n        detail: {},\r\n        medicalFile: \"\",\r\n        template: \"\",\r\n      },\r\n      rules: {\r\n        medicalFile: [{ required: true, validator: idisok, trigger: \"blur\" }],\r\n        template: [\r\n          { required: true, message: \"请选择一个模板\", trigger: \"change\" },\r\n        ],\r\n      },\r\n\r\n      templatelist: [],\r\n\r\n      formrule: [],\r\n      formContent: {},\r\n      pageindex: 0,\r\n      option: {\r\n        submitBtn: {\r\n          show: false,\r\n        },\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    daticreate(table) {\r\n      let _this = this;\r\n      let tmp = {};\r\n      tmp.medicalFile = this.form.medicalFile;\r\n      this.$refs[table].validate((valid) => {\r\n        if (valid) {\r\n          tmp.detail = JSON.stringify(this.formrule);\r\n          this.$axios.defaults.headers.Authorization =\r\n            \"Token \" + this.$store.state.Authorization;\r\n          this.$axios\r\n            .post(\"/grossReportLC/\", tmp)\r\n            .then((res) => {\r\n              alert(\"创建成功\");\r\n            })\r\n            .catch((err) => {\r\n              alert(err);\r\n            });\r\n        }\r\n      });\r\n    },\r\n    handleChange(value) {\r\n      this.$axios.defaults.headers.Authorization =\r\n        \"Token \" + this.$store.state.Authorization;\r\n      this.pageindex = 1;\r\n      this.$axios\r\n        .get(\"/grossDiagnosisModelRU/\" + value + \"/\")\r\n        .then((res) => {\r\n          this.formrule = res.data.detail.template;\r\n        })\r\n        .catch((err) => {\r\n          alert(err);\r\n        });\r\n    },\r\n  },\r\n  watch: {},\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}