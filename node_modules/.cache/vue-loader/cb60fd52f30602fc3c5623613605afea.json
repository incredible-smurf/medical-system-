{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\vue try\\system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\vue try\\system\\src\\page\\dati\\create.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\vue try\\system\\src\\page\\dati\\create.vue","mtime":1608191986147},{"path":"C:\\Users\\Administrator\\Desktop\\vue try\\system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vue try\\system\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vue try\\system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vue try\\system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgcXMgZnJvbSAicXMiOw0KZXhwb3J0IGRlZmF1bHQgew0KICAvL+ivt+axguaooeadv+WIl+ihqOWkhOeQhuaVsOaNrg0KICBiZWZvcmVDcmVhdGUoKSB7DQogICAgdGhpcy4kYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5BdXRob3JpemF0aW9uID0NCiAgICAgICJUb2tlbiAiICsgdGhpcy4kc3RvcmUuc3RhdGUuQXV0aG9yaXphdGlvbjsNCiAgICB0aGlzLiRheGlvcw0KICAgICAgLmdldCgiL2dyb3NzRGlhZ25vc2lzTW9kZWxMaXN0LyIsIHtwYXJhbXM6ew0KICAgICAgICBjYXRlZ29yeTogIkdyb3NzIiwNCiAgICAgICAgc2VhcmNoOiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VycHJvZmlsZS5uYW1lLA0KICAgICAgICBsaW1pdDogNTAwDQogICAgICB9fSkNCiAgICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgZm9yIChsZXQgaSBpbiByZXMuZGF0YS5yZXN1bHRzKSB7DQogICAgICAgICAgbGV0IHRtcCA9IHt9Ow0KICAgICAgICAgIHRtcC52YWx1ZSA9IHJlcy5kYXRhLnJlc3VsdHNbaV0uaWQ7DQogICAgICAgICAgdG1wLmxhYmVsID0gcmVzLmRhdGEucmVzdWx0c1tpXS5uYW1lOw0KICAgICAgICAgIHRoaXMudGVtcGxhdGVsaXN0LnB1c2godG1wKTsNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7DQogICAgICAgIGFsZXJ0KGVycik7DQogICAgICB9KTsNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICANCiAgICBsZXQgaWRpc29rID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gew0KICAgICAgaWYgKHZhbHVlID09ICIiKSBjYWxsYmFjayhuZXcgRXJyb3IoIuivt+i+k+WFpeeXheeQhuaho+ahiElEIikpOw0KICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZS5sZW5ndGg7IGkrKykgew0KICAgICAgICBpZiAodmFsdWVbaV0gPCAiMCIgfHwgdmFsdWVbaV0gPiAiOSIpDQogICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLnl4XnkIbmoaPmoYhJROWPquiDveaYr+aVsOWtlyIpKTsNCiAgICAgIH0NCiAgICAgIGNhbGxiYWNrKCk7DQogICAgfTsNCiAgICByZXR1cm4gew0KICAgICAgbGFiZWxQb3NpdGlvbjogImxlZnQiLA0KICAgICAgLyog6KGo5Y2V5YaF5a65ICovDQogICAgICBmb3JtOiB7DQogICAgICAgIGRldGFpbDoge30sDQogICAgICAgIG1lZGljYWxGaWxlOiAiIiwNCiAgICAgICAgdGVtcGxhdGU6ICIiLA0KICAgICAgfSwNCiAgICAgIC8v5qOA5p+l6KGo5Y2V5ZCI5rOV5oCnDQogICAgICBydWxlczogew0KICAgICAgICBtZWRpY2FsRmlsZTogW3sgcmVxdWlyZWQ6IHRydWUsIHZhbGlkYXRvcjogaWRpc29rLCB0cmlnZ2VyOiAiYmx1ciIgfV0sDQogICAgICAgIHRlbXBsYXRlOiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+mAieaLqeS4gOS4quaooeadvyIsIHRyaWdnZXI6ICJjaGFuZ2UiIH0sDQogICAgICAgIF0sDQogICAgICB9LA0KICAgICAgLy/mqKHmnb/liJfooagNCiAgICAgIHRlbXBsYXRlbGlzdDogW10sDQoNCiAgICAgIGZvcm1ydWxlOiBbXSwNCiAgICAgIGZvcm1Db250ZW50OiB7fSwNCiAgICAgIHBhZ2VpbmRleDogMCwNCiAgICAgIG9wdGlvbjogew0KICAgICAgICBzdWJtaXRCdG46IHsNCiAgICAgICAgICBzaG93OiBmYWxzZSwNCiAgICAgICAgfSwNCiAgICAgIH0sDQogICAgfTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC8vcG9zdOWkp+S9k+aKpeWRig0KICAgIGRhdGljcmVhdGUodGFibGUpIHsNCiAgICAgIGxldCBfdGhpcyA9IHRoaXM7DQogICAgICBsZXQgdG1wID0ge307DQogICAgICB0bXAubWVkaWNhbEZpbGUgPSB0aGlzLmZvcm0ubWVkaWNhbEZpbGU7DQogICAgICB0aGlzLiRyZWZzW3RhYmxlXS52YWxpZGF0ZSgodmFsaWQpID0+IHsNCiAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgdG1wLmRldGFpbCA9IEpTT04uc3RyaW5naWZ5KHRoaXMuZm9ybXJ1bGUpOw0KICAgICAgICAgIHRoaXMuJGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9DQogICAgICAgICAgICAiVG9rZW4gIiArIHRoaXMuJHN0b3JlLnN0YXRlLkF1dGhvcml6YXRpb247DQogICAgICAgICAgdGhpcy4kYXhpb3MNCiAgICAgICAgICAgIC5wb3N0KCIvZ3Jvc3NSZXBvcnRMQy8iLCB0bXApDQogICAgICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICAgIGFsZXJ0KCLliJvlu7rmiJDlip8iKTsNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gew0KICAgICAgICAgICAgICBhbGVydChlcnIpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgLy/moLnmja7kuIvmi4nmoYblhoXlrrnor7fmsYLmqKHmnb8NCiAgICBoYW5kbGVDaGFuZ2UodmFsdWUpIHsNCiAgICAgIHRoaXMuJGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9DQogICAgICAgICJUb2tlbiAiICsgdGhpcy4kc3RvcmUuc3RhdGUuQXV0aG9yaXphdGlvbjsNCiAgICAgIHRoaXMucGFnZWluZGV4ID0gMTsNCiAgICAgIHRoaXMuJGF4aW9zDQogICAgICAgIC5nZXQoIi9ncm9zc0RpYWdub3Npc01vZGVsUlUvIiArIHZhbHVlICsgIi8iKQ0KICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgdGhpcy5mb3JtcnVsZSA9IHJlcy5kYXRhLmRldGFpbC50ZW1wbGF0ZTsNCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKChlcnIpID0+IHsNCiAgICAgICAgICBhbGVydChlcnIpOw0KICAgICAgICB9KTsNCiAgICB9LA0KICB9LA0KICB3YXRjaDoge30sDQp9Ow0K"},{"version":3,"sources":["create.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"create.vue","sourceRoot":"src/page/dati","sourcesContent":["<template>\r\n<!-- 大体报告创建 -->\r\n  <el-main>\r\n    <!-- 大体报告表单域 -->\r\n    <el-form\r\n      ref=\"daticreate\"\r\n      :model=\"form\"\r\n      label-width=\"80px\"\r\n      :label-position=\"labelPosition\"\r\n      :rules=\"rules\"\r\n    >\r\n      <el-row :gutter=\"20\">\r\n        <el-col :span=\"10\">\r\n          <el-form-item prop=\"medicalFile\" label=\"病理档案ID\">\r\n            <el-input\r\n              placeholder=\"请输入病理档案ID\"\r\n              v-model=\"form.medicalFile\"\r\n            ></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"10\">\r\n          <el-form-item label=\"请选择大体模板\" prop=\"template\">\r\n            <el-cascader\r\n              v-model=\"form.template\"\r\n              :options=\"templatelist\"\r\n              @change=\"handleChange\"\r\n            ></el-cascader>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <!-- 根据选取的模板生成表单 -->\r\n      <form-create\r\n        v-if=\"pageindex == 1\"\r\n        v-model=\"formContent\"\r\n        :rule=\"formrule\"\r\n        :option=\"option\"\r\n        style=\"width: 80%; margin-top: 20px\"\r\n      ></form-create>\r\n      <el-row\r\n        type=\"flex\"\r\n        class=\"buttonquery\"\r\n        justify=\"center\"\r\n        :gutter=\"10\"\r\n        v-if=\"pageindex == 1\"\r\n      >\r\n      <!-- 提交 -->\r\n        <el-col :span=\"6\">\r\n          <el-button @click=\"daticreate('daticreate')\">新建大体报告</el-button>\r\n        </el-col>\r\n      </el-row>\r\n    </el-form>\r\n  </el-main>\r\n</template>\r\n\r\n<script>\r\nimport qs from \"qs\";\r\nexport default {\r\n  //请求模板列表处理数据\r\n  beforeCreate() {\r\n    this.$axios.defaults.headers.Authorization =\r\n      \"Token \" + this.$store.state.Authorization;\r\n    this.$axios\r\n      .get(\"/grossDiagnosisModelList/\", {params:{\r\n        category: \"Gross\",\r\n        search: this.$store.state.userprofile.name,\r\n        limit: 500\r\n      }})\r\n      .then((res) => {\r\n        for (let i in res.data.results) {\r\n          let tmp = {};\r\n          tmp.value = res.data.results[i].id;\r\n          tmp.label = res.data.results[i].name;\r\n          this.templatelist.push(tmp);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        alert(err);\r\n      });\r\n  },\r\n  data() {\r\n    \r\n    let idisok = (rule, value, callback) => {\r\n      if (value == \"\") callback(new Error(\"请输入病理档案ID\"));\r\n      for (let i = 0; i < value.length; i++) {\r\n        if (value[i] < \"0\" || value[i] > \"9\")\r\n          callback(new Error(\"病理档案ID只能是数字\"));\r\n      }\r\n      callback();\r\n    };\r\n    return {\r\n      labelPosition: \"left\",\r\n      /* 表单内容 */\r\n      form: {\r\n        detail: {},\r\n        medicalFile: \"\",\r\n        template: \"\",\r\n      },\r\n      //检查表单合法性\r\n      rules: {\r\n        medicalFile: [{ required: true, validator: idisok, trigger: \"blur\" }],\r\n        template: [\r\n          { required: true, message: \"请选择一个模板\", trigger: \"change\" },\r\n        ],\r\n      },\r\n      //模板列表\r\n      templatelist: [],\r\n\r\n      formrule: [],\r\n      formContent: {},\r\n      pageindex: 0,\r\n      option: {\r\n        submitBtn: {\r\n          show: false,\r\n        },\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    //post大体报告\r\n    daticreate(table) {\r\n      let _this = this;\r\n      let tmp = {};\r\n      tmp.medicalFile = this.form.medicalFile;\r\n      this.$refs[table].validate((valid) => {\r\n        if (valid) {\r\n          tmp.detail = JSON.stringify(this.formrule);\r\n          this.$axios.defaults.headers.Authorization =\r\n            \"Token \" + this.$store.state.Authorization;\r\n          this.$axios\r\n            .post(\"/grossReportLC/\", tmp)\r\n            .then((res) => {\r\n              alert(\"创建成功\");\r\n            })\r\n            .catch((err) => {\r\n              alert(err);\r\n            });\r\n        }\r\n      });\r\n    },\r\n    //根据下拉框内容请求模板\r\n    handleChange(value) {\r\n      this.$axios.defaults.headers.Authorization =\r\n        \"Token \" + this.$store.state.Authorization;\r\n      this.pageindex = 1;\r\n      this.$axios\r\n        .get(\"/grossDiagnosisModelRU/\" + value + \"/\")\r\n        .then((res) => {\r\n          this.formrule = res.data.detail.template;\r\n        })\r\n        .catch((err) => {\r\n          alert(err);\r\n        });\r\n    },\r\n  },\r\n  watch: {},\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}