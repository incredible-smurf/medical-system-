{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\vue try\\system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\vue try\\system\\src\\page\\dati\\create.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\vue try\\system\\src\\page\\dati\\create.vue","mtime":1606548100540},{"path":"C:\\Users\\Administrator\\Desktop\\vue try\\system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vue try\\system\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vue try\\system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vue try\\system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgcXMgZnJvbSAicXMiOw0KZXhwb3J0IGRlZmF1bHQgew0KICAvL+ivt+axguaooeadv+WIl+ihqOWkhOeQhuaVsOaNrg0KICBiZWZvcmVDcmVhdGUoKSB7DQogICAgdGhpcy4kYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5BdXRob3JpemF0aW9uID0NCiAgICAgICJUb2tlbiAiICsgdGhpcy4kc3RvcmUuc3RhdGUuQXV0aG9yaXphdGlvbjsNCiAgICB0aGlzLiRheGlvcw0KICAgICAgLmdldCgiL2dyb3NzRGlhZ25vc2lzTW9kZWxMaXN0LyIsIHsNCiAgICAgICAgY2F0ZWdvcnk6ICJHcm9zcyIsDQogICAgICAgIHNlYXJjaDogdGhpcy4kc3RvcmUuc3RhdGUudXNlcnByb2ZpbGUubmFtZSwNCiAgICAgIH0pDQogICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgIGZvciAobGV0IGkgaW4gcmVzLmRhdGEucmVzdWx0cykgew0KICAgICAgICAgIGxldCB0bXAgPSB7fTsNCiAgICAgICAgICB0bXAudmFsdWUgPSByZXMuZGF0YS5yZXN1bHRzW2ldLmlkOw0KICAgICAgICAgIHRtcC5sYWJlbCA9IHJlcy5kYXRhLnJlc3VsdHNbaV0ubmFtZTsNCiAgICAgICAgICB0aGlzLnRlbXBsYXRlbGlzdC5wdXNoKHRtcCk7DQogICAgICAgIH0NCiAgICAgIH0pDQogICAgICAuY2F0Y2goKGVycikgPT4gew0KICAgICAgICBhbGVydChlcnIpOw0KICAgICAgfSk7DQogIH0sDQogIGRhdGEoKSB7DQogICAgDQogICAgbGV0IGlkaXNvayA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsNCiAgICAgIGlmICh2YWx1ZSA9PSAiIikgY2FsbGJhY2sobmV3IEVycm9yKCLor7fovpPlhaXnl4XnkIbmoaPmoYhJRCIpKTsNCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgaWYgKHZhbHVlW2ldIDwgIjAiIHx8IHZhbHVlW2ldID4gIjkiKQ0KICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi55eF55CG5qGj5qGISUTlj6rog73mmK/mlbDlrZciKSk7DQogICAgICB9DQogICAgICBjYWxsYmFjaygpOw0KICAgIH07DQogICAgcmV0dXJuIHsNCiAgICAgIGxhYmVsUG9zaXRpb246ICJsZWZ0IiwNCiAgICAgIC8qIOihqOWNleWGheWuuSAqLw0KICAgICAgZm9ybTogew0KICAgICAgICBkZXRhaWw6IHt9LA0KICAgICAgICBtZWRpY2FsRmlsZTogIiIsDQogICAgICAgIHRlbXBsYXRlOiAiIiwNCiAgICAgIH0sDQogICAgICAvL+ajgOafpeihqOWNleWQiOazleaApw0KICAgICAgcnVsZXM6IHsNCiAgICAgICAgbWVkaWNhbEZpbGU6IFt7IHJlcXVpcmVkOiB0cnVlLCB2YWxpZGF0b3I6IGlkaXNvaywgdHJpZ2dlcjogImJsdXIiIH1dLA0KICAgICAgICB0ZW1wbGF0ZTogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fpgInmi6nkuIDkuKrmqKHmnb8iLCB0cmlnZ2VyOiAiY2hhbmdlIiB9LA0KICAgICAgICBdLA0KICAgICAgfSwNCiAgICAgIC8v5qih5p2/5YiX6KGoDQogICAgICB0ZW1wbGF0ZWxpc3Q6IFtdLA0KDQogICAgICBmb3JtcnVsZTogW10sDQogICAgICBmb3JtQ29udGVudDoge30sDQogICAgICBwYWdlaW5kZXg6IDAsDQogICAgICBvcHRpb246IHsNCiAgICAgICAgc3VibWl0QnRuOiB7DQogICAgICAgICAgc2hvdzogZmFsc2UsDQogICAgICAgIH0sDQogICAgICB9LA0KICAgIH07DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvL3Bvc3TlpKfkvZPmiqXlkYoNCiAgICBkYXRpY3JlYXRlKHRhYmxlKSB7DQogICAgICBsZXQgX3RoaXMgPSB0aGlzOw0KICAgICAgbGV0IHRtcCA9IHt9Ow0KICAgICAgdG1wLm1lZGljYWxGaWxlID0gdGhpcy5mb3JtLm1lZGljYWxGaWxlOw0KICAgICAgdGhpcy4kcmVmc1t0YWJsZV0udmFsaWRhdGUoKHZhbGlkKSA9PiB7DQogICAgICAgIGlmICh2YWxpZCkgew0KICAgICAgICAgIHRtcC5kZXRhaWwgPSBKU09OLnN0cmluZ2lmeSh0aGlzLmZvcm1ydWxlKTsNCiAgICAgICAgICB0aGlzLiRheGlvcy5kZWZhdWx0cy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPQ0KICAgICAgICAgICAgIlRva2VuICIgKyB0aGlzLiRzdG9yZS5zdGF0ZS5BdXRob3JpemF0aW9uOw0KICAgICAgICAgIHRoaXMuJGF4aW9zDQogICAgICAgICAgICAucG9zdCgiL2dyb3NzUmVwb3J0TEMvIiwgdG1wKQ0KICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgICBhbGVydCgi5Yib5bu65oiQ5YqfIik7DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHsNCiAgICAgICAgICAgICAgYWxlcnQoZXJyKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIC8v5qC55o2u5LiL5ouJ5qGG5YaF5a656K+35rGC5qih5p2/DQogICAgaGFuZGxlQ2hhbmdlKHZhbHVlKSB7DQogICAgICB0aGlzLiRheGlvcy5kZWZhdWx0cy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPQ0KICAgICAgICAiVG9rZW4gIiArIHRoaXMuJHN0b3JlLnN0YXRlLkF1dGhvcml6YXRpb247DQogICAgICB0aGlzLnBhZ2VpbmRleCA9IDE7DQogICAgICB0aGlzLiRheGlvcw0KICAgICAgICAuZ2V0KCIvZ3Jvc3NEaWFnbm9zaXNNb2RlbFJVLyIgKyB2YWx1ZSArICIvIikNCiAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgIHRoaXMuZm9ybXJ1bGUgPSByZXMuZGF0YS5kZXRhaWwudGVtcGxhdGU7DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7DQogICAgICAgICAgYWxlcnQoZXJyKTsNCiAgICAgICAgfSk7DQogICAgfSwNCiAgfSwNCiAgd2F0Y2g6IHt9LA0KfTsNCg=="},{"version":3,"sources":["create.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"create.vue","sourceRoot":"src/page/dati","sourcesContent":["<template>\r\n<!-- 大体报告创建 -->\r\n  <el-main>\r\n    <!-- 大体报告表单域 -->\r\n    <el-form\r\n      ref=\"daticreate\"\r\n      :model=\"form\"\r\n      label-width=\"80px\"\r\n      :label-position=\"labelPosition\"\r\n      :rules=\"rules\"\r\n    >\r\n      <el-row :gutter=\"20\">\r\n        <el-col :span=\"10\">\r\n          <el-form-item prop=\"medicalFile\" label=\"病理档案ID\">\r\n            <el-input\r\n              placeholder=\"请输入病理档案ID\"\r\n              v-model=\"form.medicalFile\"\r\n            ></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"10\">\r\n          <el-form-item label=\"请选择大体模板\" prop=\"template\">\r\n            <el-cascader\r\n              v-model=\"form.template\"\r\n              :options=\"templatelist\"\r\n              @change=\"handleChange\"\r\n            ></el-cascader>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <!-- 根据选取的模板生成表单 -->\r\n      <form-create\r\n        v-if=\"pageindex == 1\"\r\n        v-model=\"formContent\"\r\n        :rule=\"formrule\"\r\n        :option=\"option\"\r\n        style=\"width: 80%; margin-top: 20px\"\r\n      ></form-create>\r\n      <el-row\r\n        type=\"flex\"\r\n        class=\"buttonquery\"\r\n        justify=\"center\"\r\n        :gutter=\"10\"\r\n        v-if=\"pageindex == 1\"\r\n      >\r\n      <!-- 提交 -->\r\n        <el-col :span=\"6\">\r\n          <el-button @click=\"daticreate('daticreate')\">新建大体报告</el-button>\r\n        </el-col>\r\n      </el-row>\r\n    </el-form>\r\n  </el-main>\r\n</template>\r\n\r\n<script>\r\nimport qs from \"qs\";\r\nexport default {\r\n  //请求模板列表处理数据\r\n  beforeCreate() {\r\n    this.$axios.defaults.headers.Authorization =\r\n      \"Token \" + this.$store.state.Authorization;\r\n    this.$axios\r\n      .get(\"/grossDiagnosisModelList/\", {\r\n        category: \"Gross\",\r\n        search: this.$store.state.userprofile.name,\r\n      })\r\n      .then((res) => {\r\n        for (let i in res.data.results) {\r\n          let tmp = {};\r\n          tmp.value = res.data.results[i].id;\r\n          tmp.label = res.data.results[i].name;\r\n          this.templatelist.push(tmp);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        alert(err);\r\n      });\r\n  },\r\n  data() {\r\n    \r\n    let idisok = (rule, value, callback) => {\r\n      if (value == \"\") callback(new Error(\"请输入病理档案ID\"));\r\n      for (let i = 0; i < value.length; i++) {\r\n        if (value[i] < \"0\" || value[i] > \"9\")\r\n          callback(new Error(\"病理档案ID只能是数字\"));\r\n      }\r\n      callback();\r\n    };\r\n    return {\r\n      labelPosition: \"left\",\r\n      /* 表单内容 */\r\n      form: {\r\n        detail: {},\r\n        medicalFile: \"\",\r\n        template: \"\",\r\n      },\r\n      //检查表单合法性\r\n      rules: {\r\n        medicalFile: [{ required: true, validator: idisok, trigger: \"blur\" }],\r\n        template: [\r\n          { required: true, message: \"请选择一个模板\", trigger: \"change\" },\r\n        ],\r\n      },\r\n      //模板列表\r\n      templatelist: [],\r\n\r\n      formrule: [],\r\n      formContent: {},\r\n      pageindex: 0,\r\n      option: {\r\n        submitBtn: {\r\n          show: false,\r\n        },\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    //post大体报告\r\n    daticreate(table) {\r\n      let _this = this;\r\n      let tmp = {};\r\n      tmp.medicalFile = this.form.medicalFile;\r\n      this.$refs[table].validate((valid) => {\r\n        if (valid) {\r\n          tmp.detail = JSON.stringify(this.formrule);\r\n          this.$axios.defaults.headers.Authorization =\r\n            \"Token \" + this.$store.state.Authorization;\r\n          this.$axios\r\n            .post(\"/grossReportLC/\", tmp)\r\n            .then((res) => {\r\n              alert(\"创建成功\");\r\n            })\r\n            .catch((err) => {\r\n              alert(err);\r\n            });\r\n        }\r\n      });\r\n    },\r\n    //根据下拉框内容请求模板\r\n    handleChange(value) {\r\n      this.$axios.defaults.headers.Authorization =\r\n        \"Token \" + this.$store.state.Authorization;\r\n      this.pageindex = 1;\r\n      this.$axios\r\n        .get(\"/grossDiagnosisModelRU/\" + value + \"/\")\r\n        .then((res) => {\r\n          this.formrule = res.data.detail.template;\r\n        })\r\n        .catch((err) => {\r\n          alert(err);\r\n        });\r\n    },\r\n  },\r\n  watch: {},\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}