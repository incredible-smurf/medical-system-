{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\vue try\\system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\vue try\\system\\src\\page\\register\\query.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\vue try\\system\\src\\page\\register\\query.vue","mtime":1605512766094},{"path":"C:\\Users\\Administrator\\Desktop\\vue try\\system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vue try\\system\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vue try\\system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vue try\\system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGJlZm9yZUNyZWF0ZSgpIHsNCiAgICB0aGlzLiRheGlvcy5kZWZhdWx0cy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPQ0KICAgICAgIlRva2VuICIgKyB0aGlzLiRzdG9yZS5zdGF0ZS5BdXRob3JpemF0aW9uOw0KICAgIHRoaXMuJGF4aW9zDQogICAgICAuZ2V0KCIvcGF0aWVudExpc3QvIikNCiAgICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgZm9yIChsZXQgaXRlbSBpbiByZXMuZGF0YS5yZXN1bHRzKSB7DQogICAgICAgICAgcmVzLmRhdGEucmVzdWx0c1tpdGVtXS5zZXggPQ0KICAgICAgICAgICAgcmVzLmRhdGEucmVzdWx0c1tpdGVtXS5zZXggPT0gIm1hbGUiID8gIueUtyIgOiAi5aWzIjsNCiAgICAgICAgICB0aGlzLnRhYmxlRGF0YS5wdXNoKHJlcy5kYXRhLnJlc3VsdHNbaXRlbV0pOw0KICAgICAgICB9DQogICAgICAgIHRoaXMudG90YWxzaXplID0gcmVzLmRhdGEuY291bnQ7DQogICAgICB9KQ0KICAgICAgLmNhdGNoKChlcnIpID0+IHsNCiAgICAgICAgYWxlcnQoZXJyKTsNCiAgICAgIH0pOw0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICB0YWJsZURhdGE6IFtdLA0KICAgICAgc2VhcmNoOiAiIiwNCiAgICAgIGhhbmRsZUxpc3Q6IFtdLA0KICAgICAgLy8g5b2T5YmN6aG1DQogICAgICBjdXJyZW50UGFnZTogMSwNCiAgICAgIC8vIOavj+mhteWkmuWwkeadoQ0KICAgICAgcGFnZVNpemU6IDEwLA0KICAgICAgLy/lhbHlpJrlsJHmnaENCiAgICAgIHRvdGFsc2l6ZTogMCwNCiAgICAgIC8vDQogICAgICBzZWFyY2hPbjogZmFsc2UsDQogICAgfTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGhhbmRsZVNlYXJjaCgpIHsNCiAgICAgIHRoaXMuc2VhcmNoT24gPSB0cnVlOw0KICAgICAgdGhpcy4kYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5BdXRob3JpemF0aW9uID0NCiAgICAgICAgIlRva2VuICIgKyB0aGlzLiRzdG9yZS5zdGF0ZS5BdXRob3JpemF0aW9uOw0KICAgICAgdGhpcy4kYXhpb3MNCiAgICAgICAgLmdldCgiL3BhdGllbnRMaXN0LyIsIHsNCiAgICAgICAgICBwYXJhbXM6IHsNCiAgICAgICAgICAgIG9mZnNldDogKHRoaXMuY3VycmVudFBhZ2UgLSAxKSAqIHRoaXMucGFnZVNpemUsDQogICAgICAgICAgICBsaW1pdDogdGhpcy5wYWdlU2l6ZSwNCiAgICAgICAgICAgIHNlYXJjaDogdGhpcy5zZWFyY2gsDQogICAgICAgICAgfSwNCiAgICAgICAgfSkNCiAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgIHRoaXMudGFibGVEYXRhID0gW107DQogICAgICAgICAgZm9yIChsZXQgaXRlbSBpbiByZXMuZGF0YS5yZXN1bHRzKSB7DQogICAgICAgICAgICByZXMuZGF0YS5yZXN1bHRzW2l0ZW1dLnNleCA9DQogICAgICAgICAgICAgIHJlcy5kYXRhLnJlc3VsdHNbaXRlbV0uc2V4ID09ICJtYWxlIiA/ICLnlLciIDogIuWlsyI7DQogICAgICAgICAgICB0aGlzLnRhYmxlRGF0YS5wdXNoKHJlcy5kYXRhLnJlc3VsdHNbaXRlbV0pOw0KICAgICAgICAgIH0NCiAgICAgICAgICB0aGlzLnRvdGFsc2l6ZSA9IHJlcy5kYXRhLmNvdW50Ow0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goKGVycikgPT4gew0KICAgICAgICAgIGFsZXJ0KGVycik7DQogICAgICAgIH0pOw0KICAgIH0sDQogICAgaGFuZGxlU2l6ZUNoYW5nZSh2YWwpIHsNCiAgICAgIHRoaXMucGFnZVNpemUgPSB2YWw7DQogICAgICBsZXQgcGFybWFzX3NlbmQgPSB7DQogICAgICAgIG9mZnNldDogKHRoaXMuY3VycmVudFBhZ2UgLSAxKSAqIHRoaXMucGFnZVNpemUsDQogICAgICAgIGxpbWl0OiB0aGlzLnBhZ2VTaXplLA0KICAgICAgfTsNCiAgICAgIGlmICh0aGlzLnNlYXJjaE9uKSBwYXJtYXNfc2VuZC5zZWFyY2ggPSB0aGlzLnNlYXJjaDsNCiAgICAgIHRoaXMuJGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9DQogICAgICAgICJUb2tlbiAiICsgdGhpcy4kc3RvcmUuc3RhdGUuQXV0aG9yaXphdGlvbjsNCiAgICAgIHRoaXMuJGF4aW9zDQogICAgICAgIC5nZXQoIi9wYXRpZW50TGlzdC8iLCB7DQogICAgICAgICAgcGFyYW1zOiBwYXJtYXNfc2VuZCwNCiAgICAgICAgfSkNCiAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgIHRoaXMudGFibGVEYXRhID0gW107DQogICAgICAgICAgZm9yIChsZXQgaXRlbSBpbiByZXMuZGF0YS5yZXN1bHRzKSB7DQogICAgICAgICAgICByZXMuZGF0YS5yZXN1bHRzW2l0ZW1dLnNleCA9DQogICAgICAgICAgICAgIHJlcy5kYXRhLnJlc3VsdHNbaXRlbV0uc2V4ID09ICJtYWxlIiA/ICLnlLciIDogIuWlsyI7DQogICAgICAgICAgICB0aGlzLnRhYmxlRGF0YS5wdXNoKHJlcy5kYXRhLnJlc3VsdHNbaXRlbV0pOw0KICAgICAgICAgIH0NCiAgICAgICAgICB0aGlzLnRvdGFsc2l6ZSA9IHJlcy5kYXRhLmNvdW50Ow0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goKGVycikgPT4gew0KICAgICAgICAgIGFsZXJ0KGVycik7DQogICAgICAgIH0pOw0KICAgIH0sDQogICAgLy8g5b2T5YmN6aG1DQogICAgaGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHsNCiAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSB2YWw7DQogICAgICBsZXQgcGFybWFzX3NlbmQgPSB7DQogICAgICAgIG9mZnNldDogKHRoaXMuY3VycmVudFBhZ2UgLSAxKSAqIHRoaXMucGFnZVNpemUsDQogICAgICAgIGxpbWl0OiB0aGlzLnBhZ2VTaXplLA0KICAgICAgfTsNCiAgICAgIGlmICh0aGlzLnNlYXJjaE9uKSBwYXJtYXNfc2VuZC5zZWFyY2ggPSB0aGlzLnNlYXJjaDsNCiAgICAgIHRoaXMuJGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9DQogICAgICAgICJUb2tlbiAiICsgdGhpcy4kc3RvcmUuc3RhdGUuQXV0aG9yaXphdGlvbjsNCiAgICAgIHRoaXMuJGF4aW9zDQogICAgICAgIC5nZXQoIi9wYXRpZW50TGlzdC8iLCB7DQogICAgICAgICAgcGFyYW1zOiBwYXJtYXNfc2VuZCwNCiAgICAgICAgfSkNCiAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgIHRoaXMudGFibGVEYXRhID0gW107DQogICAgICAgICAgZm9yIChsZXQgaXRlbSBpbiByZXMuZGF0YS5yZXN1bHRzKSB7DQogICAgICAgICAgICByZXMuZGF0YS5yZXN1bHRzW2l0ZW1dLnNleCA9DQogICAgICAgICAgICAgIHJlcy5kYXRhLnJlc3VsdHNbaXRlbV0uc2V4ID09ICJtYWxlIiA/ICLnlLciIDogIuWlsyI7DQogICAgICAgICAgICB0aGlzLnRhYmxlRGF0YS5wdXNoKHJlcy5kYXRhLnJlc3VsdHNbaXRlbV0pOw0KICAgICAgICAgIH0NCiAgICAgICAgICB0aGlzLnRvdGFsc2l6ZSA9IHJlcy5kYXRhLmNvdW50Ow0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goKGVycikgPT4gew0KICAgICAgICAgIGFsZXJ0KGVycik7DQogICAgICAgIH0pOw0KICAgIH0sDQogICAgaGFuZGxlRWRpdChpbmRleCwgcm93KSB7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7DQogICAgICAgIHBhdGg6ICIvcmVnaXN0ZXIvc2hvd3BhdGllbnRkZXRhaWwiLA0KICAgICAgICBxdWVyeTogeyBpZDogcm93LmlkIH0sDQogICAgICB9KTsNCiAgICB9LA0KICB9LA0KICB3YXRjaDogew0KICAgIHNlYXJjaDogew0KICAgICAgaGFuZGxlcigpIHsNCiAgICAgICAgaWYgKHRoaXMuc2VhcmNoID09PSAiIikgdGhpcy5zZWFyY2hPbiA9IGZhbHNlOw0KICAgICAgfSwNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["query.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"query.vue","sourceRoot":"src/page/register","sourcesContent":["<template>\r\n  <el-main>\r\n    <el-row :gutter=\"5\">\r\n      <el-col :span=\"15\"\r\n        ><el-input v-model=\"search\" placeholder=\"请输入搜索姓名\"></el-input\r\n      ></el-col>\r\n      <el-col :span=\"9\"\r\n        ><el-button type=\"primary\" icon=\"el-icon-search\" @click=\"handleSearch\"\r\n          >搜索</el-button\r\n        ></el-col\r\n      >\r\n    </el-row>\r\n    <el-table :data=\"tableData\" style=\"width: 100%\">\r\n      <el-table-column label=\"病人ID\" prop=\"id\"> </el-table-column>\r\n      <el-table-column label=\"病人姓名\" prop=\"name\"> </el-table-column>\r\n      <el-table-column label=\"病人性别\" prop=\"sex\"> </el-table-column>\r\n      <el-table-column align=\"right\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button size=\"mini\" @click=\"handleEdit(scope.$index, scope.row)\"\r\n            >查看详情</el-button\r\n          >\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <el-pagination\r\n      @size-change=\"handleSizeChange\"\r\n      @current-change=\"handleCurrentChange\"\r\n      :current-page=\"currentPage\"\r\n      :page-sizes=\"[10, 20, 50]\"\r\n      :page-size=\"pageSize\"\r\n      layout=\"total, sizes, prev, pager, next, jumper\"\r\n      :total=\"totalsize\"\r\n    >\r\n    </el-pagination>\r\n  </el-main>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  beforeCreate() {\r\n    this.$axios.defaults.headers.Authorization =\r\n      \"Token \" + this.$store.state.Authorization;\r\n    this.$axios\r\n      .get(\"/patientList/\")\r\n      .then((res) => {\r\n        for (let item in res.data.results) {\r\n          res.data.results[item].sex =\r\n            res.data.results[item].sex == \"male\" ? \"男\" : \"女\";\r\n          this.tableData.push(res.data.results[item]);\r\n        }\r\n        this.totalsize = res.data.count;\r\n      })\r\n      .catch((err) => {\r\n        alert(err);\r\n      });\r\n  },\r\n  data() {\r\n    return {\r\n      tableData: [],\r\n      search: \"\",\r\n      handleList: [],\r\n      // 当前页\r\n      currentPage: 1,\r\n      // 每页多少条\r\n      pageSize: 10,\r\n      //共多少条\r\n      totalsize: 0,\r\n      //\r\n      searchOn: false,\r\n    };\r\n  },\r\n  methods: {\r\n    handleSearch() {\r\n      this.searchOn = true;\r\n      this.$axios.defaults.headers.Authorization =\r\n        \"Token \" + this.$store.state.Authorization;\r\n      this.$axios\r\n        .get(\"/patientList/\", {\r\n          params: {\r\n            offset: (this.currentPage - 1) * this.pageSize,\r\n            limit: this.pageSize,\r\n            search: this.search,\r\n          },\r\n        })\r\n        .then((res) => {\r\n          this.tableData = [];\r\n          for (let item in res.data.results) {\r\n            res.data.results[item].sex =\r\n              res.data.results[item].sex == \"male\" ? \"男\" : \"女\";\r\n            this.tableData.push(res.data.results[item]);\r\n          }\r\n          this.totalsize = res.data.count;\r\n        })\r\n        .catch((err) => {\r\n          alert(err);\r\n        });\r\n    },\r\n    handleSizeChange(val) {\r\n      this.pageSize = val;\r\n      let parmas_send = {\r\n        offset: (this.currentPage - 1) * this.pageSize,\r\n        limit: this.pageSize,\r\n      };\r\n      if (this.searchOn) parmas_send.search = this.search;\r\n      this.$axios.defaults.headers.Authorization =\r\n        \"Token \" + this.$store.state.Authorization;\r\n      this.$axios\r\n        .get(\"/patientList/\", {\r\n          params: parmas_send,\r\n        })\r\n        .then((res) => {\r\n          this.tableData = [];\r\n          for (let item in res.data.results) {\r\n            res.data.results[item].sex =\r\n              res.data.results[item].sex == \"male\" ? \"男\" : \"女\";\r\n            this.tableData.push(res.data.results[item]);\r\n          }\r\n          this.totalsize = res.data.count;\r\n        })\r\n        .catch((err) => {\r\n          alert(err);\r\n        });\r\n    },\r\n    // 当前页\r\n    handleCurrentChange(val) {\r\n      this.currentPage = val;\r\n      let parmas_send = {\r\n        offset: (this.currentPage - 1) * this.pageSize,\r\n        limit: this.pageSize,\r\n      };\r\n      if (this.searchOn) parmas_send.search = this.search;\r\n      this.$axios.defaults.headers.Authorization =\r\n        \"Token \" + this.$store.state.Authorization;\r\n      this.$axios\r\n        .get(\"/patientList/\", {\r\n          params: parmas_send,\r\n        })\r\n        .then((res) => {\r\n          this.tableData = [];\r\n          for (let item in res.data.results) {\r\n            res.data.results[item].sex =\r\n              res.data.results[item].sex == \"male\" ? \"男\" : \"女\";\r\n            this.tableData.push(res.data.results[item]);\r\n          }\r\n          this.totalsize = res.data.count;\r\n        })\r\n        .catch((err) => {\r\n          alert(err);\r\n        });\r\n    },\r\n    handleEdit(index, row) {\r\n      this.$router.push({\r\n        path: \"/register/showpatientdetail\",\r\n        query: { id: row.id },\r\n      });\r\n    },\r\n  },\r\n  watch: {\r\n    search: {\r\n      handler() {\r\n        if (this.search === \"\") this.searchOn = false;\r\n      },\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}