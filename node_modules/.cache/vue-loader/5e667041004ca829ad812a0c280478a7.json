{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\vue try\\system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\vue try\\system\\src\\page\\template\\templatequery.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\vue try\\system\\src\\page\\template\\templatequery.vue","mtime":1605680488236},{"path":"C:\\Users\\Administrator\\Desktop\\vue try\\system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vue try\\system\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vue try\\system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vue try\\system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHRlbXBsYXRlbGlzdDogW10sDQogICAgICB0b3RhbHNpemU6IDAsDQogICAgICBjdXJyZW50UGFnZTogMSwNCiAgICAgIC8vIOavj+mhteWkmuWwkeadoQ0KICAgICAgcGFnZVNpemU6IDEwLA0KICAgIH07DQogIH0sDQogIGJlZm9yZUNyZWF0ZSgpIHsNCiAgICB0aGlzLiRheGlvcy5kZWZhdWx0cy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPQ0KICAgICAgIlRva2VuICIgKyB0aGlzLiRzdG9yZS5zdGF0ZS5BdXRob3JpemF0aW9uOw0KICAgIHRoaXMuJGF4aW9zDQogICAgICAuZ2V0KCIvZ3Jvc3NEaWFnbm9zaXNNb2RlbExpc3QvIiwgew0KICAgICAgICBzZWFyY2g6IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJwcm9maWxlLm5hbWUsDQogICAgICB9KQ0KICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICB0aGlzLnRvdGFsc2l6ZSA9IHJlcy5kYXRhLmNvdW50Ow0KICAgICAgICBmb3IgKGxldCBpIGluIHJlcy5kYXRhLnJlc3VsdHMpIHsNCiAgICAgICAgICBsZXQgdG1wID0ge307DQogICAgICAgICAgdG1wLnZhbHVlID0gcmVzLmRhdGEucmVzdWx0c1tpXS5pZDsNCiAgICAgICAgICB0bXAubGFiZWwgPSByZXMuZGF0YS5yZXN1bHRzW2ldLm5hbWU7DQoNCiAgICAgICAgICBpZiAocmVzLmRhdGEucmVzdWx0c1tpXS5jYXRlZ29yeSA9PT0gIkdyb3NzIikgdG1wLmNhdCA9ICLlpKfkvZPmqKHmnb8iOw0KICAgICAgICAgIGVsc2UgaWYgKHJlcy5kYXRhLnJlc3VsdHNbaV0uY2F0ZWdvcnkgPT09ICJEaWFnbm9zaXMiKQ0KICAgICAgICAgICAgdG1wLmNhdCA9ICLor4rmlq3miqXlkYrmqKHmnb8iOw0KICAgICAgICAgIGVsc2UgaWYgKHJlcy5kYXRhLnJlc3VsdHNbaV0uY2F0ZWdvcnkgPT09ICJNYXRlcmlhbHMiKQ0KICAgICAgICAgICAgdG1wLmNhdCA9ICLlj5bmnZDmqKHmnb8iOw0KICAgICAgICAgIGVsc2UgaWYgKHJlcy5kYXRhLnJlc3VsdHNbaV0uY2F0ZWdvcnkgPT09ICJCaW9wc3kiKQ0KICAgICAgICAgICAgdG1wLmNhdCA9ICLliIfniYfmqKHmnb8iOw0KICAgICAgICAgIHRoaXMudGVtcGxhdGVsaXN0LnB1c2godG1wKTsNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7DQogICAgICAgIGFsZXJ0KGVycik7DQogICAgICB9KTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGhhbmRsZVNpemVDaGFuZ2UodmFsKSB7DQogICAgICB0aGlzLnBhZ2VTaXplID0gdmFsOw0KDQogICAgICBsZXQgcGFybWFzX3NlbmQgPSB7DQogICAgICAgIG9mZnNldDogKHRoaXMuY3VycmVudFBhZ2UgLSAxKSAqIHRoaXMucGFnZVNpemUsDQogICAgICAgIGxpbWl0OiB0aGlzLnBhZ2VTaXplLA0KICAgICAgICBzZWFyY2g6IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJwcm9maWxlLm5hbWUsDQogICAgICB9Ow0KICAgICAgdGhpcy4kYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5BdXRob3JpemF0aW9uID0NCiAgICAgICAgIlRva2VuICIgKyB0aGlzLiRzdG9yZS5zdGF0ZS5BdXRob3JpemF0aW9uOw0KICAgICAgdGhpcy4kYXhpb3MNCiAgICAgICAgLmdldCgiL2dyb3NzRGlhZ25vc2lzTW9kZWxMaXN0LyIsIHsgcGFyYW1zOiBwYXJtYXNfc2VuZCB9KQ0KICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgdGhpcy50ZW1wbGF0ZWxpc3QgPSBbXTsNCiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOw0KICAgICAgICAgIGZvciAobGV0IGkgaW4gcmVzLmRhdGEucmVzdWx0cykgew0KICAgICAgICAgICAgbGV0IHRtcCA9IHt9Ow0KICAgICAgICAgICAgdG1wLnZhbHVlID0gcmVzLmRhdGEucmVzdWx0c1tpXS5pZDsNCiAgICAgICAgICAgIHRtcC5sYWJlbCA9IHJlcy5kYXRhLnJlc3VsdHNbaV0ubmFtZTsNCiAgICAgICAgICAgIGlmIChyZXMuZGF0YS5yZXN1bHRzW2ldLmNhdGVnb3J5ID09PSAiR3Jvc3MiKSB0bXAuY2F0ID0gIuWkp+S9k+aooeadvyI7DQogICAgICAgICAgICBlbHNlIGlmIChyZXMuZGF0YS5yZXN1bHRzW2ldLmNhdGVnb3J5ID09PSAiRGlhZ25vc2lzIikNCiAgICAgICAgICAgICAgdG1wLmNhdCA9ICLor4rmlq3miqXlkYrmqKHmnb8iOw0KICAgICAgICAgICAgZWxzZSBpZiAocmVzLmRhdGEucmVzdWx0c1tpXS5jYXRlZ29yeSA9PT0gIk1hdGVyaWFscyIpDQogICAgICAgICAgICAgIHRtcC5jYXQgPSAi5Y+W5p2Q5qih5p2/IjsNCiAgICAgICAgICAgIGVsc2UgaWYgKHJlcy5kYXRhLnJlc3VsdHNbaV0uY2F0ZWdvcnkgPT09ICJCaW9wc3kiKQ0KICAgICAgICAgICAgICB0bXAuY2F0ID0gIuWIh+eJh+aooeadvyI7DQogICAgICAgICAgICB0aGlzLnRlbXBsYXRlbGlzdC5wdXNoKHRtcCk7DQogICAgICAgICAgfQ0KICAgICAgICAgIHRoaXMudG90YWxzaXplID0gcmVzLmRhdGEuY291bnQ7DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7DQogICAgICAgICAgYWxlcnQoZXJyKTsNCiAgICAgICAgfSk7DQogICAgfSwNCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkgew0KICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IHZhbDsNCiAgICAgIGxldCBwYXJtYXNfc2VuZCA9IHsNCiAgICAgICAgb2Zmc2V0OiAodGhpcy5jdXJyZW50UGFnZSAtIDEpICogdGhpcy5wYWdlU2l6ZSwNCiAgICAgICAgbGltaXQ6IHRoaXMucGFnZVNpemUsDQogICAgICAgIHNlYXJjaDogdGhpcy4kc3RvcmUuc3RhdGUudXNlcnByb2ZpbGUubmFtZSwNCiAgICAgIH07DQoNCiAgICAgIHRoaXMuJGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9DQogICAgICAgICJUb2tlbiAiICsgdGhpcy4kc3RvcmUuc3RhdGUuQXV0aG9yaXphdGlvbjsNCiAgICAgIHRoaXMuJGF4aW9zDQogICAgICAgIC5nZXQoIi9ncm9zc0RpYWdub3Npc01vZGVsTGlzdC8iLCB7IHBhcmFtczogcGFybWFzX3NlbmQgfSkNCiAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgIHRoaXMudGVtcGxhdGVsaXN0ID0gW107DQogICAgICAgICAgZm9yIChsZXQgaSBpbiByZXMuZGF0YS5yZXN1bHRzKSB7DQogICAgICAgICAgICBsZXQgdG1wID0ge307DQogICAgICAgICAgICB0bXAudmFsdWUgPSByZXMuZGF0YS5yZXN1bHRzW2ldLmlkOw0KICAgICAgICAgICAgdG1wLmxhYmVsID0gcmVzLmRhdGEucmVzdWx0c1tpXS5uYW1lOw0KICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnJlc3VsdHNbaV0uY2F0ZWdvcnkgPT09ICJHcm9zcyIpIHRtcC5jYXQgPSAi5aSn5L2T5qih5p2/IjsNCiAgICAgICAgICAgIGVsc2UgaWYgKHJlcy5kYXRhLnJlc3VsdHNbaV0uY2F0ZWdvcnkgPT09ICJEaWFnbm9zaXMiKQ0KICAgICAgICAgICAgICB0bXAuY2F0ID0gIuiviuaWreaKpeWRiuaooeadvyI7DQogICAgICAgICAgICBlbHNlIGlmIChyZXMuZGF0YS5yZXN1bHRzW2ldLmNhdGVnb3J5ID09PSAiTWF0ZXJpYWxzIikNCiAgICAgICAgICAgICAgdG1wLmNhdCA9ICLlj5bmnZDmqKHmnb8iOw0KICAgICAgICAgICAgZWxzZSBpZiAocmVzLmRhdGEucmVzdWx0c1tpXS5jYXRlZ29yeSA9PT0gIkJpb3BzeSIpDQogICAgICAgICAgICAgIHRtcC5jYXQgPSAi5YiH54mH5qih5p2/IjsNCiAgICAgICAgICAgIHRoaXMudGVtcGxhdGVsaXN0LnB1c2godG1wKTsNCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy50b3RhbHNpemUgPSByZXMuZGF0YS5jb3VudDsNCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKChlcnIpID0+IHsNCiAgICAgICAgICBhbGVydChlcnIpOw0KICAgICAgICB9KTsNCiAgICB9LA0KICAgIGhhbmRsZUVkaXQoaW5kZXgsIHJvdykgew0KICAgICAgDQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7DQogICAgICAgIHBhdGg6ICIvdGVtcGxhdGUvc2hvd3RlbXBsYXRlZGV0YWlsIiwNCiAgICAgICAgcXVlcnk6IHsgaWQ6IHJvdy52YWx1ZSB9LA0KICAgICAgfSk7DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["templatequery.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"templatequery.vue","sourceRoot":"src/page/template","sourcesContent":["<template>\r\n  <el-main>\r\n    <el-table :data=\"templatelist\" style=\"width: 100%\">\r\n      <el-table-column label=\"模板ID\" prop=\"value\"> </el-table-column>\r\n      <el-table-column label=\"模板名\" prop=\"label\"> </el-table-column>\r\n      <el-table-column label=\"模板类型\" prop=\"cat\"> </el-table-column>\r\n      <el-table-column align=\"right\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button size=\"mini\" @click=\"handleEdit(scope.$index, scope.row)\"\r\n            >查看详情</el-button\r\n          >\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <el-pagination\r\n      @size-change=\"handleSizeChange\"\r\n      @current-change=\"handleCurrentChange\"\r\n      :current-page=\"currentPage\"\r\n      :page-sizes=\"[10, 20, 50]\"\r\n      :page-size=\"pageSize\"\r\n      layout=\"total, sizes, prev, pager, next, jumper\"\r\n      :total=\"totalsize\"\r\n    >\r\n    </el-pagination>\r\n  </el-main>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      templatelist: [],\r\n      totalsize: 0,\r\n      currentPage: 1,\r\n      // 每页多少条\r\n      pageSize: 10,\r\n    };\r\n  },\r\n  beforeCreate() {\r\n    this.$axios.defaults.headers.Authorization =\r\n      \"Token \" + this.$store.state.Authorization;\r\n    this.$axios\r\n      .get(\"/grossDiagnosisModelList/\", {\r\n        search: this.$store.state.userprofile.name,\r\n      })\r\n      .then((res) => {\r\n        this.totalsize = res.data.count;\r\n        for (let i in res.data.results) {\r\n          let tmp = {};\r\n          tmp.value = res.data.results[i].id;\r\n          tmp.label = res.data.results[i].name;\r\n\r\n          if (res.data.results[i].category === \"Gross\") tmp.cat = \"大体模板\";\r\n          else if (res.data.results[i].category === \"Diagnosis\")\r\n            tmp.cat = \"诊断报告模板\";\r\n          else if (res.data.results[i].category === \"Materials\")\r\n            tmp.cat = \"取材模板\";\r\n          else if (res.data.results[i].category === \"Biopsy\")\r\n            tmp.cat = \"切片模板\";\r\n          this.templatelist.push(tmp);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        alert(err);\r\n      });\r\n  },\r\n  methods: {\r\n    handleSizeChange(val) {\r\n      this.pageSize = val;\r\n\r\n      let parmas_send = {\r\n        offset: (this.currentPage - 1) * this.pageSize,\r\n        limit: this.pageSize,\r\n        search: this.$store.state.userprofile.name,\r\n      };\r\n      this.$axios.defaults.headers.Authorization =\r\n        \"Token \" + this.$store.state.Authorization;\r\n      this.$axios\r\n        .get(\"/grossDiagnosisModelList/\", { params: parmas_send })\r\n        .then((res) => {\r\n          this.templatelist = [];\r\n          console.log(res);\r\n          for (let i in res.data.results) {\r\n            let tmp = {};\r\n            tmp.value = res.data.results[i].id;\r\n            tmp.label = res.data.results[i].name;\r\n            if (res.data.results[i].category === \"Gross\") tmp.cat = \"大体模板\";\r\n            else if (res.data.results[i].category === \"Diagnosis\")\r\n              tmp.cat = \"诊断报告模板\";\r\n            else if (res.data.results[i].category === \"Materials\")\r\n              tmp.cat = \"取材模板\";\r\n            else if (res.data.results[i].category === \"Biopsy\")\r\n              tmp.cat = \"切片模板\";\r\n            this.templatelist.push(tmp);\r\n          }\r\n          this.totalsize = res.data.count;\r\n        })\r\n        .catch((err) => {\r\n          alert(err);\r\n        });\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.currentPage = val;\r\n      let parmas_send = {\r\n        offset: (this.currentPage - 1) * this.pageSize,\r\n        limit: this.pageSize,\r\n        search: this.$store.state.userprofile.name,\r\n      };\r\n\r\n      this.$axios.defaults.headers.Authorization =\r\n        \"Token \" + this.$store.state.Authorization;\r\n      this.$axios\r\n        .get(\"/grossDiagnosisModelList/\", { params: parmas_send })\r\n        .then((res) => {\r\n          this.templatelist = [];\r\n          for (let i in res.data.results) {\r\n            let tmp = {};\r\n            tmp.value = res.data.results[i].id;\r\n            tmp.label = res.data.results[i].name;\r\n            if (res.data.results[i].category === \"Gross\") tmp.cat = \"大体模板\";\r\n            else if (res.data.results[i].category === \"Diagnosis\")\r\n              tmp.cat = \"诊断报告模板\";\r\n            else if (res.data.results[i].category === \"Materials\")\r\n              tmp.cat = \"取材模板\";\r\n            else if (res.data.results[i].category === \"Biopsy\")\r\n              tmp.cat = \"切片模板\";\r\n            this.templatelist.push(tmp);\r\n          }\r\n          this.totalsize = res.data.count;\r\n        })\r\n        .catch((err) => {\r\n          alert(err);\r\n        });\r\n    },\r\n    handleEdit(index, row) {\r\n      \r\n      this.$router.push({\r\n        path: \"/template/showtemplatedetail\",\r\n        query: { id: row.value },\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}